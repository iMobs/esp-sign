<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Hello World</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
  <h1>Hello World</h1>
  <input type="color" id="color" name="color" value="#FFFFFF">
</body>
  <script>
    function debounce(func, delay) {
      let timeout;
      return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
      };
    }
    document.getElementById("color").addEventListener("input", debounce(async function(event) {
      const color = event.target.value;
      try {
      const res = await fetch("/", {
        method: "POST",
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ color })
      });
      const data = await res.json();
      console.log(data);
      } catch (error) {
        console.error(error);
      }
    }, 300));
  </script>
</html>
